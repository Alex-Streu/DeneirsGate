!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e="",i={isInitDone:!1,listTemplate:'<div class="jquery-todolist" style="display:none;">\n            <div class="flexbox-container justify-between items-center">\n                <label class="text-large">ToDo List</label>\n                <div class="btn btn-sm btn-default todo-add-item"><i class="fa fa-plus"></i></div>\n            </div>\n\n            <div class="jquery-todolist-footer">\n                <div class="jquery-todolist-add">\n                    <span class="jquery-todolist-add-input">\n                        <div class=\'fancy-textarea sm\'>\n                            <textarea class=\'form-control\' name="j" placeholder="Add new item..." maxlength="50" style="display:none"></textarea>\n                        </div>\n                    </span>\n                </div>\n\n                <div class="jquery-todolist-items"></div>\n            </div>\n        </div>',itemTemplate:'<div class="jquery-todolist-item">\n            <div class="ui-state-default">\n                <div class="jquery-todolist-item-title ui-widget-content jquery-todolist-action-edit jquery-todolist-action">\n                    <span class="jquery-todolist-item-title-text"></span>\n                </div>\n            </div>\n            <span class="jquery-todolist-item-actions-left">\n                <span class="jquery-todolist-action jquery-todolist-item-checkbox">&#9744;</span>\n            </span>\n        </div>',itemEditTemplate:'<div class="jquery-todolist-edit">\n            <div class="jquery-todolist-edit-input">\n                <input type="text" name="e" maxlength="50" value="" />\n            </div>\n        </div>',confirmButtonTemplate:'<span class="jquery-todolist-button ui-state-default">\n            <span class="jquery-todolist-action jquery-todolist-button-confirm">continue?</span>\n            <span class="jquery-todolist-action jquery-todolist-button-cancel">&times;</span>\n        </span>',menuTemplate:'<div class="jquery-todolist-menu ui-widget-content">\n            <div class="jquery-todolist-menu-actions">\n                <a href="javascript:" class="jquery-todolist-action" data-todolistaction="close menu">&times</a>\n            </div>\n            <div class="jquery-todolist-menu-items">\n                <a href="javascript:" class="ui-state-default jquery-todolist-action jquery-todolist-menu-item" data-todolistaction="toggle done">Show/Hide Done</a>\n            </div>\n        </div>'};t.fn.initTodoList=function(o,s,n){e=s,i.isInitDone||(i.isInitDone=!0,t("body").on("click",function(e){var i,o=t("div.jquery-todolist-edit");o.length&&((i=t(e.target).closest(".jquery-todolist-action-edit")).length?o.each(function(){t.contains(i[0],this)||t(this).find(".jquery-todolist-edit-save").click()}):o.find(".jquery-todolist-edit-save").click()),(o=t("div.jquery-todolist-menu:visible")).length}));var d=this;return this.each(function(){if(this.jqueryTodoList&&"string"==typeof o){switch(String(o).toLowerCase()){case"getsetup":d=this.jqueryTodoList.getSetup()}return this}if(t(this).hasClass("has-jquery-todolist"))return this;var s={$ele:t(this),opt:t.extend({},{title:"Todo List",items:[],newItemPlaceholder:"New Item",editItemTooltip:"Click to Edit",focusOnTitle:!1,customActions:null},o),getSetup:function(){var e={title:s.$ui.find(".jquery-todolist-title-text").text(),items:[]};return s.getItems().each(function(){var i=t(this);e.items.push({done:i.is(".jquery-todolist-item-done"),title:i.find(".jquery-todolist-item-title-text").text()})}),e},addItem:function(n,d,l){var a=t(i.itemTemplate).find(".jquery-todolist-item-title-text").append(n.title).end().addClass(n.done?"jquery-todolist-item-done":"").find(".jquery-todolist-action-edit").attr("title",s.opt.editItemTooltip).end().appendTo(s.$ui.$items);t(a).data("key",l),d||(s.$ele.trigger("todolist-add",o,s.$ele),s.$ele.trigger("todolist-change",o,s.$ele));var u={ItemKey:l,ArcKey:e,Text:n.title};return ajaxPost(u,"/Campaign/UpdateTodoItem",function(){}),a},getItems:function(){return s.$ui.$items.find("div.jquery-todolist-item")},showEdit:function(n){var d=n.find(".jquery-todolist-item-title-text,.jquery-todolist-title-text").eq(0),l=t(i.itemEditTemplate).css("display","none").find("input").val(d.text()).end().appendTo(n),a=function(){d.html(l.find("input").val()),l.hide().delay("500").remove(),d.show(),n.addClass("jquery-todolist-action"),s.$ele.trigger("todolist-edit",o,s.$ele),s.$ele.trigger("todolist-change",o,s.$ele);var i={ItemKey:t(n).closest(".jquery-todolist-item").data("key"),ArcKey:e,Text:d.text()};ajaxPost(i,"/Campaign/UpdateTodoItem",function(){})};n.removeClass("jquery-todolist-action"),d.hide(),l.show().promise().then(function(){l.find("input").focus()}),l.find(".jquery-todolist-edit-save").on("click",a).end().find("input").on("keyup",function(t){13===t.which&&a()})},setupListMenu:function(){if(s.$ui.$menu=t(i.menuTemplate).css("display","none").appendTo(s.$ui),t.isArray(s.opt.customActions)){var e=s.$ui.$menu.find(".jquery-todolist-menu-items > a:first").clone(),n=t();t.each(s.opt.customActions,function(){if(t.isPlainObject(this)){var i=this;n=n.add(e.clone().text(this.title||"Action?").attr("data-todolistaction","custom action").click(function(){if(t.isFunction(i.action))return i.action.call(s.$ele,o,i)}))}}),s.$ui.$menu.find(".jquery-todolist-menu-items").append(n)}}};return s.$ui=t(i.listTemplate).appendTo(s.$ele.empty().addClass("has-jquery-todolist")).find(".jquery-todolist-title-text").html(s.opt.title).end().find(".jquery-todolist-add-input-text").attr("placeholder",s.opt.newItemPlaceholder).end().find(".jquery-todolist-action-edit").attr("title",s.opt.editItemTooltip).end(),s.$ui.$menu=null,s.$ui.$items=s.$ui.find("div.jquery-todolist-items"),s.$ui.$newItemInput=s.$ui.find(".jquery-todolist-add-input textarea"),t.isArray(s.opt.items)&&t.each(s.opt.items,function(t,e){var i={title:e.Text,done:!1};s.addItem(i,!0,e.ItemKey)}),s.$ui.on("click.jqueryTodoList",".todo-add-item",function(){s.$ui.$newItemInput.show("fast"),s.$ui.$newItemInput.focus()}),s.$ui.on("click.jqueryTodoList",".jquery-todolist-action",function(){var n,d=t(this);if(d.is(".jquery-todolist-item-action-remove"))d.hide().closest(".jquery-todolist-item-actions-right").append(t(i.confirmButtonTemplate).find(".jquery-todolist-button-confirm").addClass("ui-state-error jquery-todolist-item-action-remove-confirmed").html(s.opt.removeLabel).end().find(".jquery-todolist-button-cancel").addClass("jquery-todolist-item-action-remove-cancel").end());else if(d.is(".jquery-todolist-item-action-remove-cancel"))d.closest(".jquery-todolist-item-actions-right").find(".jquery-todolist-item-action-remove").show().end().end().closest(".jquery-todolist-button").remove();else if(d.is(".jquery-todolist-item-action-remove-confirmed"))d.closest(".jquery-todolist-item").slideUp().promise().then(function(){t(this).remove()}),d.trigger("todolist-remove",o,d),d.trigger("todolist-change",o,d);else if(d.is(".jquery-todolist-item-checkbox"))if((n=d.closest(".jquery-todolist-item")).hasClass("jquery-todolist-item-done"))n.removeClass("jquery-todolist-item-done"),d.trigger("todolist-unchecked",o,d),d.trigger("todolist-change",o,d);else{n.addClass("jquery-todolist-item-done"),d.trigger("todolist-checked",o,d),d.trigger("todolist-change",o,d),d.closest(".jquery-todolist-item").delay(500).slideUp().promise().then(function(){t(this).remove()});var l={ItemKey:d.closest(".jquery-todolist-item").data("key"),ArcKey:e};ajaxPost(l,"/Campaign/DeleteTodoItem",function(){})}else d.is(".jquery-todolist-action-edit")?s.showEdit(d):d.is(".jquery-todolist-menu-show")?(s.$ui.$menu||s.setupListMenu(),s.$ui.$menu.is(":visible")?s.$ui.$menu.hide():s.$ui.$menu.show()):d.is(".jquery-todolist-menu-item")?("toggle done"===d.data("todolistaction")&&(s.$ui.$items.hasClass("jquery-todolist-hide-done")?s.$ui.$items.removeClass("jquery-todolist-hide-done"):s.$ui.$items.addClass("jquery-todolist-hide-done")),d.closest(".jquery-todolist-menu").hide()):"close menu"===d.data("todolistaction")&&d.closest(".jquery-todolist-menu").hide()}),s.$ui.$newItemInput.on("keyup",function(t){var e;13===t.which&&(s.$ui.$newItemInput.val(s.$ui.$newItemInput.val().replace(/[\r\n\v]+/g,"")),(e=s.$ui.$newItemInput.val())&&s.addItem({title:e},!1,createGuid()),s.$ui.$newItemInput.val(""),s.$ui.$newItemInput.hide("fast"))}),this.jqueryTodoList=s,s.$ui.css("display",""),s.opt.focusOnTitle&&setTimeout(function(){s.$ui.find("div.jquery-todolist-title").find(".jquery-todolist-title-text").click().end().find("input").select()},500),this}),d}});